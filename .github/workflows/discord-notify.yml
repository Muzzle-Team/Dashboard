name: Discord Commit Notifier
on:
  push:
    branches:
      - main
jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        env:
          DISCORD_WEBHOOK: "https://discord.com/api/webhooks/1423632532842348607/uOyYnGnD_JPMvn_fLC15O6A8-kTjnDQZCzTa2Z2fVo9CVMjeDWzfGajoQmv6w73hK0EA"
          COMMIT_MESSAGE: ${{ github.event.head_commit.message }}
        run: |
          curl -X POST \
            -H "Content-Type: application/json" \
            -d @- "$DISCORD_WEBHOOK" <<EOF
          {
            "embeds": [{
              "title": "ðŸš€ New Commit",
              "description": "**Repository:** ${{ github.repository }}\n**Author:** ${{ github.actor }}\n**Commit:** \`${GITHUB_SHA:0:7}\`",
              "url": "${{ github.event.head_commit.url }}",
              "color": 3447003,
              "fields": [
                {
                  "name": "Message",
                  "value": "$(echo "$COMMIT_MESSAGE" | head -c 200)"
                }
              ]
            }]
          }
          EOF
